#!/usr/bin/env php
<?php

//todo aggiungere check versione

if (file_exists( __DIR__ . '/../../../autoload.php')) {
    $autoloader = require_once __DIR__ . '/../../../autoload.php';
}
else
if (file_exists( __DIR__ . '/../vendor/autoload.php')) {
    $autoloader = require_once __DIR__ . '/../vendor/autoload.php';
}
else
{
    throw new \RuntimeException('autoload.php non found');
}

use NamespaceProtector\Command\ConcreteValidateNamespaceCommand;
use NamespaceProtector\Common\FileSystemPath;
use NamespaceProtector\Scanner\ComposerJson;
use Symfony\Component\Console\Application;

$app = new Application('Namespace Protector','0.1.0 (Alpha)');
$app->add(new ConcreteValidateNamespaceCommand(new ComposerJson(new FileSystemPath(__DIR__.'/../composer.json'))));

try {
    $app->run();
} catch (Exception $e) {
    echo "Unexpected error...";
    return 1;
}
